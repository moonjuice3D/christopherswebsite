<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fin-Viz Dashboard | Christopher Alemao</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-oq6I3+9xKqVf1pX1uG7+8bMZsVHz7h0QOHbZAf6ZzHqD4N8H3nWc9Sr+uiHCtxV3JtK4qtzqF3V2l5j6bV0R2Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Chart.js for visualizations -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top left, #1d4ed8 0, #020617 50%) fixed,
                  radial-gradient(circle at bottom right, #22c55e 0, #020617 50%) fixed;
      background-blend-mode: screen;
      min-height: 100vh;
    }

    .glass {
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .pill {
      border-radius: 9999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    /* subtle scrollbars */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.5);
      border-radius: 999px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(148, 163, 184, 0.9);
    }
  </style>
</head>

<body class="text-slate-100">
  <!-- Top bar -->
  <header class="glass mx-auto max-w-6xl mt-6 mb-4 rounded-2xl px-6 py-4 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <a href="index.htm#projects" class="pill px-4 py-1 text-sm text-slate-300 hover:text-sky-300 transition flex items-center gap-2">
        <i class="fa-solid fa-arrow-left"></i>
        Back to Portfolio
      </a>
      <div class="hidden sm:flex flex-col">
        <span class="text-xs uppercase tracking-[0.2em] text-sky-400">Fin-Viz Dashboard</span>
        <span class="text-sm text-slate-400">Real-time style financial overview (demo data)</span>
      </div>
    </div>

    <div class="flex items-center gap-2">
      <span class="pill px-4 py-1 text-xs flex items-center gap-2 text-emerald-300">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-400"></span>
        </span>
        Live Demo • Sample Data
      </span>
    </div>
  </header>

  <!-- Main layout -->
  <main class="mx-auto max-w-6xl pb-10 px-4 sm:px-0">
    <div class="grid grid-cols-1 lg:grid-cols-[260px,1fr] gap-6">
      <!-- Left sidebar: watchlist & filters -->
      <aside class="glass rounded-2xl p-5 flex flex-col gap-6">
        <div>
          <h2 class="text-sm font-semibold text-slate-300 mb-1 flex items-center gap-2">
            <i class="fa-solid fa-chart-line text-sky-400"></i>
            Watchlist
          </h2>
          <p class="text-xs text-slate-500 mb-3">Click a symbol to drive the dashboard.</p>

          <div id="symbol-list" class="flex flex-col gap-2 text-sm">
            <!-- Filled by JS -->
          </div>
        </div>

        <div class="border-t border-slate-700 pt-4">
          <h2 class="text-sm font-semibold text-slate-300 mb-2 flex items-center gap-2">
            <i class="fa-solid fa-sliders text-emerald-400"></i>
            Filters
          </h2>
          <label class="flex items-center justify-between text-xs text-slate-400 mb-2">
            <span>Time horizon</span>
            <select id="time-range" class="bg-slate-900 border border-slate-700 text-xs rounded-full px-2 py-1 focus:outline-none focus:ring-1 focus:ring-sky-500">
              <option value="1D">1D</option>
              <option value="5D" selected>5D</option>
              <option value="1M">1M</option>
            </select>
          </label>
          <label class="flex items-center justify-between text-xs text-slate-400">
            <span>Theme</span>
            <span class="inline-flex items-center gap-1 text-[11px] px-2 py-1 rounded-full bg-slate-900 border border-slate-700">
              <i class="fa-solid fa-microchip text-sky-400"></i>
              AI / FinTech
            </span>
          </label>
        </div>

        <div class="mt-auto text-[11px] text-slate-500 border-t border-slate-700 pt-3">
          <p>This dashboard is powered by <span class="text-sky-300 font-medium">simulated market data</span> for demo purposes, with frontend logic written in vanilla JS + Chart.js.</p>
        </div>
      </aside>

      <!-- Right: dashboard content -->
      <section class="flex flex-col gap-6">
        <!-- KPI cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="glass rounded-2xl px-4 py-3 flex flex-col justify-between">
            <div class="flex items-center justify-between text-xs text-slate-400 mb-1">
              <span>Symbol</span>
              <span id="asset-type" class="px-2 py-0.5 rounded-full bg-slate-900/70 text-[10px] border border-slate-600"></span>
            </div>
            <div class="flex items-end justify-between">
              <div>
                <div id="asset-symbol" class="text-xl font-semibold text-sky-300">AAPL</div>
                <div id="asset-name" class="text-xs text-slate-400">Apple Inc.</div>
              </div>
              <i class="fa-solid fa-layer-group text-slate-500 text-2xl"></i>
            </div>
          </div>

          <div class="glass rounded-2xl px-4 py-3">
            <div class="flex items-center justify-between text-xs text-slate-400 mb-1">
              <span>Last price</span>
              <span class="flex items-center gap-1 text-[11px] text-slate-500">
                <i class="fa-regular fa-clock"></i>
                <span id="last-updated">–</span>
              </span>
            </div>
            <div class="flex items-end justify-between">
              <div class="text-2xl font-semibold text-emerald-300" id="last-price">$–</div>
              <div class="text-xs">
                <span id="change-abs" class="font-semibold"></span>
                <span id="change-pct" class="ml-1 px-2 py-0.5 rounded-full text-[10px]"></span>
              </div>
            </div>
          </div>

          <div class="glass rounded-2xl px-4 py-3">
            <div class="flex items-center justify-between text-xs text-slate-400 mb-1">
              <span>24h Volume</span>
              <i class="fa-solid fa-chart-bar text-indigo-300"></i>
            </div>
            <div class="text-2xl font-semibold text-indigo-300" id="volume">–</div>
            <div class="text-[11px] text-slate-500">Across major venues (simulated).</div>
          </div>

          <div class="glass rounded-2xl px-4 py-3">
            <div class="flex items-center justify-between text-xs text-slate-400 mb-1">
              <span>Volatility</span>
              <i class="fa-solid fa-wave-square text-amber-300"></i>
            </div>
            <div class="text-2xl font-semibold text-amber-300" id="volatility">–%</div>
            <div class="text-[11px] text-slate-500">Realized over selected horizon.</div>
          </div>
        </div>

        <!-- Chart + order book -->
        <div class="grid grid-cols-1 xl:grid-cols-[minmax(0,2fr),minmax(0,1fr)] gap-6">
          <!-- Price chart -->
          <div class="glass rounded-2xl p-5">
            <div class="flex items-center justify-between mb-3">
              <div>
                <h2 class="text-sm font-semibold text-slate-200 flex items-center gap-2">
                  <i class="fa-solid fa-line-chart text-sky-400"></i>
                  Price action
                </h2>
                <p class="text-xs text-slate-500">Intraday-style movement with subtle AI shimmer.</p>
              </div>
            </div>

            <div class="relative h-64 md:h-80">
              <canvas id="price-chart"></canvas>
              <!-- AI shimmer overlay -->
              <div class="pointer-events-none absolute inset-0 opacity-30 mix-blend-screen">
                <div class="absolute -left-10 top-10 w-32 h-32 bg-sky-500 rounded-full blur-3xl animate-pulse"></div>
                <div class="absolute right-0 bottom-0 w-40 h-40 bg-emerald-400 rounded-full blur-3xl animate-[pulse_5s_ease-in-out_infinite]"></div>
              </div>
            </div>
          </div>

          <!-- Mini "CRM" style positions panel -->
          <div class="glass rounded-2xl p-5 flex flex-col">
            <div class="flex items-center justify-between mb-3">
              <h2 class="text-sm font-semibold text-slate-200 flex items-center gap-2">
                <i class="fa-solid fa-clipboard-list text-emerald-300"></i>
                Positions snapshot
              </h2>
              <span class="px-2 py-0.5 rounded-full bg-emerald-900/40 border border-emerald-500/40 text-[10px] text-emerald-200">
                Demo portfolio
              </span>
            </div>

            <div class="overflow-auto -mx-3 px-3">
              <table class="w-full text-xs text-left border-separate border-spacing-y-1">
                <thead class="text-slate-400">
                  <tr>
                    <th class="py-1">Asset</th>
                    <th class="py-1 text-right">Exposure</th>
                    <th class="py-1 text-right">PnL</th>
                    <th class="py-1 text-right">Risk</th>
                  </tr>
                </thead>
                <tbody id="positions-body">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>

            <div class="mt-4 text-[11px] text-slate-500 flex gap-2 items-start">
              <i class="fa-solid fa-circle-info mt-[2px] text-sky-400"></i>
              <p>
                Numbers below are generated via a small <span class="text-sky-300 font-medium">simulation engine</span> in JavaScript to mimic how a real trading CRM might look and feel.
              </p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Footer note -->
    <footer class="mt-8 text-[11px] text-slate-500 text-center">
      © 2025 Christopher Alemao • Fin-Viz Dashboard Demo • UI: Tailwind + Chart.js + vanilla JS
    </footer>
  </main>

  <script>
    // --- Simulated market data ---------------------------------------------
    const demoData = {
      AAPL: {
        name: "Apple Inc.",
        type: "Equity • US Tech",
        prices: [192.1, 193.5, 192.9, 194.2, 195.1, 194.6, 196.3, 197.4, 196.9, 198.2, 199.0],
        volume: 54_200_000,
      },
      TSLA: {
        name: "Tesla Inc.",
        type: "Equity • US Auto",
        prices: [204.3, 207.9, 206.1, 209.5, 212.0, 210.7, 215.3, 217.8, 216.4, 219.2, 221.0],
        volume: 61_800_000,
      },
      BTCUSD: {
        name: "Bitcoin / USD",
        type: "Crypto • Spot",
        prices: [63_500, 63_900, 64_200, 64_800, 65_350, 65_900, 66_400, 66_050, 66_700, 67_150, 67_900],
        volume: 32_500,
      },
      ETHUSD: {
        name: "Ethereum / USD",
        type: "Crypto • Spot",
        prices: [3_320, 3_355, 3_380, 3_410, 3_460, 3_495, 3_520, 3_540, 3_575, 3_610, 3_640],
        volume: 18_900,
      },
    };

    const positionsTemplate = [
      { label: "Core", weight: 0.40 },
      { label: "Momentum", weight: 0.25 },
      { label: "Hedging", weight: 0.20 },
      { label: "Tactical", weight: 0.15 },
    ];

    const timeLabels = ["T-50m", "T-45m", "T-40m", "T-35m", "T-30m", "T-25m", "T-20m", "T-15m", "T-10m", "T-5m", "Now"];

    // --- DOM elements ------------------------------------------------------
    const symbolListEl   = document.getElementById("symbol-list");
    const timeRangeEl    = document.getElementById("time-range");

    const assetSymbolEl  = document.getElementById("asset-symbol");
    const assetNameEl    = document.getElementById("asset-name");
    const assetTypeEl    = document.getElementById("asset-type");
    const lastPriceEl    = document.getElementById("last-price");
    const lastUpdatedEl  = document.getElementById("last-updated");
    const changeAbsEl    = document.getElementById("change-abs");
    const changePctEl    = document.getElementById("change-pct");
    const volumeEl       = document.getElementById("volume");
    const volatilityEl   = document.getElementById("volatility");
    const positionsBody  = document.getElementById("positions-body");

    // --- Chart setup -------------------------------------------------------
    const ctx = document.getElementById("price-chart").getContext("2d");
    const gradient = ctx.createLinearGradient(0, 0, 0, 300);
    gradient.addColorStop(0, "rgba(56, 189, 248, 0.35)");
    gradient.addColorStop(1, "rgba(15, 23, 42, 0.0)");

    const priceChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: timeLabels,
        datasets: [{
          label: "Price",
          data: [],
          borderColor: "#38bdf8",
          borderWidth: 2,
          backgroundColor: gradient,
          fill: true,
          tension: 0.35,
          pointRadius: 0,
        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: "#020617",
            borderColor: "#38bdf8",
            borderWidth: 1,
            padding: 10,
            titleColor: "#e5e7eb",
            bodyColor: "#9ca3af",
            displayColors: false,
          },
        },
        scales: {
          x: {
            grid: { color: "rgba(30, 64, 175, 0.35)" },
            ticks: { color: "#64748b", font: { size: 10 } },
          },
          y: {
            grid: { color: "rgba(30, 64, 175, 0.25)" },
            ticks: { color: "#64748b", font: { size: 10 } },
          },
        },
      },
    });

    // --- Helpers -----------------------------------------------------------
    function formatNumber(n) {
      if (Math.abs(n) >= 1_000_000_000) return (n / 1_000_000_000).toFixed(2) + "B";
      if (Math.abs(n) >= 1_000_000) return (n / 1_000_000).toFixed(2) + "M";
      if (Math.abs(n) >= 1_000) return (n / 1_000).toFixed(1) + "K";
      return n.toLocaleString();
    }

    function formatCurrency(n) {
      const options = { style: "currency", currency: "USD", maximumFractionDigits: n >= 1000 ? 0 : 2 };
      return n.toLocaleString("en-US", options);
    }

    function computeVolatility(prices) {
      const returns = [];
      for (let i = 1; i < prices.length; i++) {
        returns.push((prices[i] - prices[i - 1]) / prices[i - 1]);
      }
      const mean = returns.reduce((a, b) => a + b, 0) / returns.length;
      const variance = returns.reduce((acc, r) => acc + (r - mean) ** 2, 0) / (returns.length - 1 || 1);
      const stdDev = Math.sqrt(variance);
      return (stdDev * Math.sqrt(returns.length) * 100); // pseudo-annualized
    }

    function randomPnL() {
      const base = (Math.random() - 0.5) * 0.12; // -6% to +6%
      return base;
    }

    // --- UI logic ----------------------------------------------------------
    function renderSymbolList(activeSymbol) {
      symbolListEl.innerHTML = "";
      Object.entries(demoData).forEach(([symbol, meta]) => {
        const isActive = symbol === activeSymbol;
        const btn = document.createElement("button");
        btn.className =
          "w-full text-left px-3 py-2 rounded-xl border text-xs flex items-center justify-between transition " +
          (isActive
            ? "border-sky-500 bg-sky-900/40 text-sky-100"
            : "border-slate-700 bg-slate-900/70 text-slate-300 hover:border-sky-500 hover:text-sky-200");
        btn.innerHTML = `
          <div>
            <div class="font-semibold">${symbol}</div>
            <div class="text-[11px] text-slate-500">${meta.name}</div>
          </div>
          <i class="fa-solid fa-chevron-right text-[10px] ${isActive ? "text-sky-300" : "text-slate-500"}"></i>
        `;
        btn.addEventListener("click", () => setActiveSymbol(symbol));
        symbolListEl.appendChild(btn);
      });
    }

    function renderPositions(symbol, lastPrice) {
      positionsBody.innerHTML = "";
      positionsTemplate.forEach((slot) => {
        const notional = lastPrice * slot.weight * 1_000; // arbitrary
        const pnlPct = randomPnL();
        const pnlDollar = notional * pnlPct;
        const risk = (Math.random() * 4 + 1).toFixed(1); // 1–5

        const tr = document.createElement("tr");
        tr.className = "glass bg-slate-900/40";
        tr.innerHTML = `
          <td class="py-1 pr-2">
            <div class="flex flex-col">
              <span class="font-medium text-slate-200">${symbol}</span>
              <span class="text-[11px] text-slate-500">${slot.label}</span>
            </div>
          </td>
          <td class="py-1 text-right text-slate-300">${formatCurrency(notional)}</td>
          <td class="py-1 text-right">
            <span class="${pnlPct >= 0 ? "text-emerald-300" : "text-rose-400"} font-medium">
              ${pnlPct >= 0 ? "+" : ""}${(pnlPct * 100).toFixed(2)}%
            </span>
            <span class="text-[11px] text-slate-500 block">${pnlDollar >= 0 ? "+" : ""}${formatCurrency(pnlDollar)}</span>
          </td>
          <td class="py-1 text-right">
            <span class="px-2 py-0.5 rounded-full text-[10px] ${risk >= 3 ? "bg-amber-900/60 text-amber-200" : "bg-emerald-900/60 text-emerald-200"}">
              ${risk}/5
            </span>
          </td>
        `;
        positionsBody.appendChild(tr);
      });
    }

    function setActiveSymbol(symbol) {
      const meta = demoData[symbol];
      if (!meta) return;

      const prices = [...meta.prices];

      // Slightly morph the last price to keep the chart feeling "alive"
      const jitter = (Math.random() - 0.5) * 0.6;
      prices[prices.length - 1] = prices[prices.length - 1] * (1 + jitter / 100);

      const first = prices[0];
      const last = prices[prices.length - 1];
      const absChange = last - first;
      const pctChange = (absChange / first) * 100;
      const vol = computeVolatility(prices);

      assetSymbolEl.textContent = symbol;
      assetNameEl.textContent = meta.name;
      assetTypeEl.textContent = meta.type;

      lastPriceEl.textContent = formatCurrency(last);
      lastUpdatedEl.textContent = new Date().toLocaleTimeString("en-US", { hour: "2-digit", minute: "2-digit" });

      changeAbsEl.textContent = (absChange >= 0 ? "+" : "") + formatCurrency(absChange);
      changePctEl.textContent = `${pctChange >= 0 ? "+" : ""}${pctChange.toFixed(2)}%`;
      changePctEl.className =
        "ml-1 px-2 py-0.5 rounded-full text-[10px] " +
        (pctChange >= 0 ? "bg-emerald-900/70 text-emerald-300" : "bg-rose-900/70 text-rose-300");

      volumeEl.textContent = formatNumber(meta.volume);
      volatilityEl.textContent = vol.toFixed(2) + "%";

      priceChart.data.datasets[0].data = prices;
      priceChart.update();

      renderPositions(symbol, last);
      renderSymbolList(symbol);
    }

    // --- Init --------------------------------------------------------------
    document.addEventListener("DOMContentLoaded", () => {
      renderSymbolList("AAPL");
      setActiveSymbol("AAPL");

      // "Pulse" the active symbol every few seconds to emulate streaming updates
      setInterval(() => {
        const activeSymbol = assetSymbolEl.textContent.trim() || "AAPL";
        setActiveSymbol(activeSymbol);
      }, 8000);

      // Time range dropdown is mostly cosmetic for now
      timeRangeEl.addEventListener("change", () => {
        // In a real system we'd refetch / resample here
      });
    });
  </script>
</body>
</html>

