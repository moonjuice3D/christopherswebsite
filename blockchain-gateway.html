<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Blockchain Payment Gateway | Christopher Alemao</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --bg-1: #020617;
      --bg-2: #020617;
      --accent-1: #0ea5e9;
      --accent-2: #22c55e;
      --card-bg: rgba(15, 23, 42, 0.92);
      --border-soft: rgba(148, 163, 184, 0.35);
    }

    body {
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 0% 0%, #0f172a, #020617 55%, #020617 100%);
      color: #e2e8f0;
      min-height: 100vh;
    }

    /* Background energy blobs */
    .bg-orbit {
      pointer-events: none;
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 10% 20%, rgba(56, 189, 248, 0.17), transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(96, 165, 250, 0.18), transparent 55%),
        radial-gradient(circle at 50% 10%, rgba(16, 185, 129, 0.12), transparent 55%);
      opacity: 0.85;
      mix-blend-mode: screen;
      z-index: -1;
      animation: float-orbit 22s ease-in-out infinite alternate;
    }

    @keyframes float-orbit {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      50%  { transform: translate3d(-12px, 8px, 0) scale(1.03); }
      100% { transform: translate3d(10px, -10px, 0) scale(1.02); }
    }

    .glass-card {
      background: var(--card-bg);
      border-radius: 1.25rem;
      border: 1px solid var(--border-soft);
      box-shadow:
        0 20px 60px rgba(15, 23, 42, 0.7),
        0 0 0 1px rgba(15, 23, 42, 0.6);
      backdrop-filter: blur(18px);
    }

    .pill {
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .status-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .status-pending {
      background: rgba(234, 179, 8, 0.12);
      color: #fbbf24;
      border: 1px solid rgba(234, 179, 8, 0.45);
    }
    .status-confirmed {
      background: rgba(34, 197, 94, 0.12);
      color: #4ade80;
      border: 1px solid rgba(34, 197, 94, 0.45);
    }
    .status-failed {
      background: rgba(248, 113, 113, 0.12);
      color: #fca5a5;
      border: 1px solid rgba(239, 68, 68, 0.45);
    }

    /* Simple pulse for "Processing" state */
    .pulse-ring {
      position: absolute;
      inset: -1px;
      border-radius: inherit;
      border: 1px solid rgba(56, 189, 248, 0.4);
      box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.4);
      animation: pulse-ring 1.7s ease-out infinite;
      pointer-events: none;
    }

    @keyframes pulse-ring {
      0%   { opacity: 0.9; transform: scale(1); }
      100% { opacity: 0; transform: scale(1.08); }
    }

    /* Toast */
    .toast {
      position: fixed;
      right: 1.25rem;
      bottom: 1.25rem;
      z-index: 50;
      transform: translateY(120%);
      opacity: 0;
      transition: transform 0.25s ease, opacity 0.25s ease;
    }
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* Scrollbar subtle */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #020617;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.45);
      border-radius: 999px;
    }
  </style>
</head>
<body class="bg-slate-950 text-slate-100">
  <div class="bg-orbit"></div>

  <div class="min-h-screen max-w-6xl mx-auto px-4 py-8 flex flex-col gap-8">
    <!-- Top nav -->
    <header class="flex items-center justify-between">
      <a href="index.htm#projects" class="pill px-3 py-1.5 text-xs font-medium text-slate-300 hover:text-sky-300 transition-colors">
        ← Back to Portfolio
      </a>
      <div class="flex items-center gap-3 text-xs sm:text-sm">
        <span class="text-slate-400 hidden sm:inline">Gateway status:</span>
        <span id="backend-pill" class="status-chip status-pending">
          <span class="inline-block h-1.5 w-1.5 rounded-full bg-amber-400 animate-pulse"></span>
          Checking backend…
        </span>
      </div>
    </header>

    <!-- Hero -->
    <section class="grid lg:grid-cols-2 gap-6 lg:gap-8 items-stretch">
      <!-- Left: copy + metrics -->
      <div class="glass-card relative overflow-hidden p-6 sm:p-8 flex flex-col gap-6">
        <div class="absolute -right-32 -top-32 h-64 w-64 rounded-full bg-gradient-to-br from-sky-500/20 via-cyan-400/10 to-emerald-400/0 blur-3xl pointer-events-none"></div>
        <div class="absolute -left-20 bottom-0 h-40 w-40 rounded-full bg-gradient-to-br from-emerald-400/15 to-transparent blur-3xl pointer-events-none"></div>

        <div class="relative">
          <p class="text-xs uppercase tracking-[0.28em] text-sky-300/80 mb-2">
            Blockchain Payment Gateway
          </p>
          <h1 class="text-2xl sm:text-3xl md:text-4xl font-semibold leading-tight mb-3">
            Route high-value payments
            <span class="text-sky-400">through Ethereum</span> with audit-ready traces.
          </h1>
          <p class="text-sm sm:text-base text-slate-300/90 max-w-xl">
            This demo simulates a Web3 payment operations console. Every payment is
            assigned a pseudo transaction hash, confirmations, gas fee, and chain.
            Under the hood it can talk to a simple Node.js API, or run fully client-side
            for zero-cost demos.
          </p>
        </div>

        <!-- Stats row -->
        <div class="relative grid grid-cols-3 gap-3 text-xs sm:text-sm mt-2">
          <div class="pill px-3 py-2.5 flex flex-col gap-1">
            <span class="text-slate-400">Simulated TVL</span>
            <span class="text-sky-300 font-semibold" id="stat-tvl">$18.4M</span>
          </div>
          <div class="pill px-3 py-2.5 flex flex-col gap-1">
            <span class="text-slate-400">Success rate</span>
            <span class="text-emerald-300 font-semibold" id="stat-success">99.2%</span>
          </div>
          <div class="pill px-3 py-2.5 flex flex-col gap-1">
            <span class="text-slate-400">Chains</span>
            <span class="text-slate-100 font-semibold">ETH · Sepolia · Polygon</span>
          </div>
        </div>

        <!-- Tech badges -->
        <div class="relative flex flex-wrap gap-2 text-xs mt-2">
          <span class="status-chip status-confirmed">Solidity</span>
          <span class="status-chip status-confirmed">React-style UI</span>
          <span class="status-chip status-confirmed">Web3.js (ready)</span>
          <span class="status-chip status-pending">Node.js API</span>
        </div>
      </div>

      <!-- Right: payment form -->
      <div class="glass-card relative p-6 sm:p-8 flex flex-col gap-5">
        <div class="flex items-center justify-between mb-1">
          <div>
            <h2 class="text-lg sm:text-xl font-semibold">Create payment</h2>
            <p class="text-xs text-slate-400 mt-1">
              Submit a simulated on-chain payment. This can also POST to your Node.js API.
            </p>
          </div>
          <span class="pill px-3 py-1 text-[0.65rem] font-semibold text-emerald-300 uppercase tracking-[0.16em]">
            Demo mode
          </span>
        </div>

        <form id="payment-form" class="space-y-3 text-sm">
          <div class="flex flex-col gap-1.5">
            <label class="text-slate-300 text-xs font-medium">From wallet</label>
            <div class="pill px-3 py-2 text-[0.78rem] text-slate-300 flex items-center justify-between">
              <span id="from-address">0xC0C0…ALM0</span>
              <span class="text-slate-500 hidden sm:inline">Cold storage (simulated)</span>
            </div>
          </div>

          <div class="flex flex-col gap-1.5">
            <label for="to" class="text-slate-300 text-xs font-medium">Recipient address</label>
            <input
              id="to"
              type="text"
              required
              placeholder="0xA2c9... or ENS (simulated)"
              class="pill px-3 py-2 bg-slate-900/60 text-slate-100 outline-none focus:ring-1 focus:ring-sky-500 focus:border-sky-500 text-xs sm:text-sm"
            />
          </div>

          <div class="grid grid-cols-2 gap-3">
            <div class="flex flex-col gap-1.5">
              <label for="amount" class="text-slate-300 text-xs font-medium">Amount (ETH)</label>
              <input
                id="amount"
                type="number"
                step="0.0001"
                min="0.0001"
                required
                placeholder="0.125"
                class="pill px-3 py-2 bg-slate-900/60 text-slate-100 outline-none focus:ring-1 focus:ring-sky-500 focus:border-sky-500 text-xs sm:text-sm"
              />
            </div>
            <div class="flex flex-col gap-1.5">
              <label for="network" class="text-slate-300 text-xs font-medium">Network</label>
              <select
                id="network"
                class="pill px-3 py-2 bg-slate-900/60 text-slate-100 outline-none focus:ring-1 focus:ring-sky-500 focus:border-sky-500 text-xs sm:text-sm"
              >
                <option value="Ethereum Mainnet">Ethereum Mainnet</option>
                <option value="Sepolia Testnet">Sepolia Testnet</option>
                <option value="Polygon">Polygon</option>
              </select>
            </div>
          </div>

          <div class="flex flex-col gap-1.5">
            <label for="memo" class="text-slate-300 text-xs font-medium">Payment memo (optional)</label>
            <input
              id="memo"
              type="text"
              placeholder="Settlement for Invoice #INV-2041"
              class="pill px-3 py-2 bg-slate-900/60 text-slate-100 outline-none focus:ring-1 focus:ring-sky-500 focus:border-sky-500 text-xs sm:text-sm"
            />
          </div>

          <div class="flex items-center justify-between pt-1">
            <div class="flex items-center gap-1.5 text-[0.7rem] text-slate-400">
              <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
              <span>Gas estimated ≈ <span id="gas-estimate">0.0012 ETH</span></span>
            </div>
            <button
              id="submit-btn"
              type="submit"
              class="relative inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-xs font-semibold bg-gradient-to-r from-sky-500 to-emerald-400 text-slate-950 shadow-lg shadow-sky-500/30 hover:shadow-emerald-400/30 hover:brightness-110 transition-all"
            >
              <span id="submit-label">Send payment</span>
              <span id="submit-spinner" class="hidden h-3 w-3 border-2 border-slate-900 border-t-transparent rounded-full animate-spin"></span>
            </button>
          </div>
        </form>

        <p class="mt-2 text-[0.68rem] text-slate-500 leading-relaxed">
          This environment does <span class="font-semibold text-slate-300">not broadcast real transactions</span>.
          It generates deterministic-looking hashes and confirmations client-side. To wire it up to real Web3
          providers, plug in <span class="text-sky-300">ethers.js</span> or <span class="text-sky-300">Web3.js</span>
          where noted in the script.
        </p>
      </div>
    </section>

    <!-- Ledger / activity -->
    <section class="glass-card p-5 sm:p-6 md:p-7 flex flex-col gap-4">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
        <div>
          <h2 class="text-lg sm:text-xl font-semibold">Ledger</h2>
          <p class="text-xs text-slate-400 mt-1">
            Every simulated payment appears here with a fake hash, block height, and confirmations.
            When your Node.js API is online, this table can be hydrated from <code class="text-[0.7rem] bg-slate-900/70 px-1.5 py-0.5 rounded border border-slate-700/60">/api/payments</code>.
          </p>
        </div>
        <div class="flex flex-wrap items-center gap-2 text-xs">
          <span class="pill px-3 py-1 text-slate-300">
            Last block: <span id="last-block">19,842,110</span>
          </span>
          <span class="pill px-3 py-1 text-slate-300">
            Gas price: <span id="gas-price">24</span> gwei
          </span>
        </div>
      </div>

      <div class="relative mt-1 border border-slate-700/70 rounded-xl overflow-hidden bg-slate-950/60">
        <div class="max-h-72 overflow-auto text-xs">
          <table class="min-w-full text-left">
            <thead class="bg-slate-900/90 border-b border-slate-800 text-[0.65rem] uppercase tracking-[0.15em] text-slate-400">
              <tr>
                <th class="px-4 py-2.5">Time</th>
                <th class="px-4 py-2.5">Tx hash</th>
                <th class="px-4 py-2.5">To</th>
                <th class="px-4 py-2.5">Network</th>
                <th class="px-4 py-2.5 text-right">Amount (ETH)</th>
                <th class="px-4 py-2.5 text-right">Status</th>
              </tr>
            </thead>
            <tbody id="ledger-body" class="divide-y divide-slate-800/80">
              <!-- rows injected by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Footer note -->
    <footer class="pb-3 text-[0.7rem] text-slate-500">
      <p>
        Backend endpoint (optional, for real demos): <span class="font-mono text-slate-300" id="api-base-label">http://localhost:4000</span>.
        Update <span class="font-mono text-slate-300">API_BASE</span> in the script when you deploy your Node.js server
        (Render / Railway free tiers both work).
      </p>
    </footer>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <div class="glass-card px-4 py-3 flex items-start gap-3 border border-emerald-400/50 bg-slate-900/95">
      <div class="mt-0.5">
        <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-300">
          ✓
        </span>
      </div>
      <div>
        <p class="text-xs font-semibold text-emerald-300">Payment simulated</p>
        <p id="toast-body" class="text-[0.7rem] text-slate-200 mt-0.5"></p>
      </div>
    </div>
  </div>

  <script>
    // ============================
    // Config
    // ============================
    const API_BASE = "http://localhost:4000"; // change when you deploy backend

    // ============================
    // Elements
    // ============================
    const backendPill = document.getElementById("backend-pill");
    const ledgerBody = document.getElementById("ledger-body");
    const gasEstimateEl = document.getElementById("gas-estimate");
    const lastBlockEl = document.getElementById("last-block");
    const gasPriceEl = document.getElementById("gas-price");
    const toastEl = document.getElementById("toast");
    const toastBodyEl = document.getElementById("toast-body");
    const form = document.getElementById("payment-form");
    const submitBtn = document.getElementById("submit-btn");
    const submitLabel = document.getElementById("submit-label");
    const submitSpinner = document.getElementById("submit-spinner");

    let payments = [];
    let backendOnline = false;

    // Seed data for ledger
    const seedPayments = [
      {
        id: "INV-2041",
        hash: "0x9e3f1a...7b92d4",
        to: "0xA21c…f90B",
        network: "Ethereum Mainnet",
        amount: 0.845,
        status: "confirmed",
        timestamp: new Date(Date.now() - 1000 * 60 * 36).toISOString(),
        block: 19842001,
        confirmations: 42,
      },
      {
        id: "INV-2038",
        hash: "0x7c51a0...c4fa32",
        to: "0xbE5a…9C72",
        network: "Polygon",
        amount: 2.41,
        status: "confirmed",
        timestamp: new Date(Date.now() - 1000 * 60 * 90).toISOString(),
        block: 43729922,
        confirmations: 128,
      },
      {
        id: "PAYOUT-102",
        hash: "0x13ac4f...e901d3",
        to: "0xF9d0…01bA",
        network: "Sepolia Testnet",
        amount: 0.121,
        status: "confirmed",
        timestamp: new Date(Date.now() - 1000 * 60 * 8).toISOString(),
        block: 5123341,
        confirmations: 9,
      },
    ];

    // ============================
    // Helpers
    // ============================
    function shortHash(hash) {
      if (!hash) return "";
      if (hash.length <= 12) return hash;
      return hash.slice(0, 8) + "…" + hash.slice(-6);
    }

    function formatTime(iso) {
      const d = new Date(iso);
      return d.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
    }

    function randomBetween(min, max) {
      return Math.random() * (max - min) + min;
    }

    function randomInt(min, max) {
      return Math.floor(randomBetween(min, max + 1));
    }

    function randomHash() {
      const hex = "abcdef0123456789";
      let out = "0x";
      for (let i = 0; i < 64; i++) {
        out += hex[Math.floor(Math.random() * hex.length)];
      }
      return out;
    }

    function setBackendStatus(online) {
      backendOnline = online;
      backendPill.classList.remove("status-pending", "status-confirmed", "status-failed");
      if (online) {
        backendPill.classList.add("status-confirmed");
        backendPill.innerHTML = '<span class="inline-block h-1.5 w-1.5 rounded-full bg-emerald-400"></span> Backend online';
      } else {
        backendPill.classList.add("status-failed");
        backendPill.innerHTML = '<span class="inline-block h-1.5 w-1.5 rounded-full bg-rose-400"></span> Backend offline (using local demo data)';
      }
    }

    function showToast(message) {
      toastBodyEl.textContent = message;
      toastEl.classList.add("show");
      setTimeout(() => toastEl.classList.remove("show"), 3800);
    }

    function renderLedger() {
      ledgerBody.innerHTML = "";
      payments
        .slice()
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .forEach((p) => {
          const tr = document.createElement("tr");
          tr.className = "hover:bg-slate-900/80 transition-colors";
          tr.innerHTML = `
            <td class="px-4 py-2.5 whitespace-nowrap text-slate-300/90">${formatTime(p.timestamp)}</td>
            <td class="px-4 py-2.5 font-mono text-[0.68rem] text-sky-300">${shortHash(p.hash)}</td>
            <td class="px-4 py-2.5 text-slate-300/90">${p.to}</td>
            <td class="px-4 py-2.5 text-slate-400">${p.network}</td>
            <td class="px-4 py-2.5 text-right text-slate-100">${p.amount.toFixed(4)}</td>
            <td class="px-4 py-2.5 text-right">
              <span class="status-chip ${
                p.status === "confirmed"
                  ? "status-confirmed"
                  : p.status === "pending"
                  ? "status-pending"
                  : "status-failed"
              }">
                ${p.status}
              </span>
            </td>
          `;
          ledgerBody.appendChild(tr);
        });
    }

    function simulateNetworkMetrics() {
      const baseBlock = 19842110 + randomInt(-40, 40);
      const gas = randomInt(18, 34);
      lastBlockEl.textContent = baseBlock.toLocaleString();
      gasPriceEl.textContent = gas;
      gasEstimateEl.textContent = randomBetween(0.0008, 0.0023).toFixed(4) + " ETH";
    }

    // ============================
    // Backend bootstrapping
    // ============================
    async function tryLoadFromBackend() {
      try {
        const res = await fetch(API_BASE + "/api/payments");
        if (!res.ok) throw new Error("Bad status");
        const data = await res.json();
        if (Array.isArray(data.payments)) {
          payments = data.payments;
        } else {
          payments = seedPayments;
        }
        setBackendStatus(true);
      } catch (err) {
        payments = seedPayments;
        setBackendStatus(false);
      }

      renderLedger();
      simulateNetworkMetrics();
    }

    // ============================
    // Form handler
    // ============================
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const to = document.getElementById("to").value.trim();
      const amount = parseFloat(document.getElementById("amount").value);
      const network = document.getElementById("network").value;
      const memo = document.getElementById("memo").value.trim();

      if (!to || !amount || amount <= 0) return;

      // Visual "processing" state
      submitBtn.disabled = true;
      submitLabel.textContent = "Processing…";
      submitSpinner.classList.remove("hidden");
      submitBtn.classList.add("relative");
      let ring = document.querySelector("#submit-btn .pulse-ring");
      if (!ring) {
        ring = document.createElement("div");
        ring.className = "pulse-ring";
        submitBtn.appendChild(ring);
      }

      // Fake short delay to simulate chain confirmation
      await new Promise((resolve) => setTimeout(resolve, randomInt(900, 1600)));

      // Construct simulated tx
      const tx = {
        id: "SIM-" + randomInt(1000, 9999),
        hash: randomHash(),
        to,
        network,
        amount,
        status: "confirmed",
        timestamp: new Date().toISOString(),
        block: randomInt(19842000, 19843000),
        confirmations: randomInt(6, 72),
        memo,
      };

      // Push locally
      payments.unshift(tx);
      renderLedger();
      simulateNetworkMetrics();

      // Optional: POST to backend if available
      if (backendOnline) {
        try {
          await fetch(API_BASE + "/api/payments", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(tx),
          });
        } catch (err) {
          // Silent fail – we already rendered locally
        }
      }

      showToast(
        `Simulated ${amount.toFixed(4)} ETH to ${to.slice(0, 8)}… on ${network}. Hash: ${shortHash(tx.hash)}`
      );

      // Reset UI
      submitBtn.disabled = false;
      submitLabel.textContent = "Send payment";
      submitSpinner.classList.add("hidden");
      if (ring) ring.remove();
      form.reset();
    });

    // Init
    tryLoadFromBackend();
  </script>
</body>
</html>
