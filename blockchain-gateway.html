<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Blockchain Payment Gateway | Christopher Alemao</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- React + ReactDOM + Babel (for JSX) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Web3.js -->
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>

  <style>
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 45%, #000 100%);
      color: #e5e7eb;
      min-height: 100vh;
    }

    .glass-panel {
      background: linear-gradient(to bottom right, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.85));
      border-radius: 1.5rem;
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow:
        0 30px 60px rgba(15, 23, 42, 0.8),
        0 0 40px rgba(56, 189, 248, 0.18);
      backdrop-filter: blur(18px);
    }

    .neon-pill {
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.4);
      box-shadow: 0 0 20px rgba(56, 189, 248, 0.4);
    }

    .gradient-border {
      position: relative;
      border-radius: 1.25rem;
      padding: 1px;
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.7), rgba(129, 140, 248, 0.7), rgba(16, 185, 129, 0.7));
    }

    .gradient-border-inner {
      border-radius: 1.2rem;
      background: rgba(15, 23, 42, 0.96);
    }

    .status-pill {
      border-radius: 999px;
      padding: 0.1rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .status-pill.success {
      background: rgba(22, 163, 74, 0.15);
      color: #4ade80;
      border: 1px solid rgba(34, 197, 94, 0.6);
    }

    .status-pill.pending {
      background: rgba(234, 179, 8, 0.15);
      color: #fde68a;
      border: 1px solid rgba(234, 179, 8, 0.6);
    }

    .status-pill.failed {
      background: rgba(220, 38, 38, 0.15);
      color: #fecaca;
      border: 1px solid rgba(239, 68, 68, 0.7);
    }
  </style>
</head>
<body class="text-slate-100">
  <!-- Top bar -->
  <div class="w-full border-b border-slate-800/70 bg-slate-950/70 backdrop-blur-xl">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-4">
      <div class="flex items-center gap-3">
        <span
          class="inline-flex items-center justify-center w-9 h-9 rounded-xl bg-gradient-to-br from-cyan-400 to-emerald-400 text-slate-950 font-extrabold text-xl shadow-lg shadow-cyan-500/40">
          â‚¿
        </span>
        <div>
          <div class="text-xs uppercase tracking-[0.25em] text-slate-400">
            Christopher Alemao
          </div>
          <div class="text-sm font-semibold text-slate-100">
            Blockchain Payment Gateway
          </div>
        </div>
      </div>

      <div class="flex items-center gap-3 text-xs sm:text-sm">
        <a href="index.htm#projects"
           class="hidden sm:inline-flex items-center px-3 py-1.5 rounded-full border border-slate-700/80 text-slate-300 hover:bg-slate-800/80 transition">
          <i class="fa-solid fa-arrow-left mr-2 text-slate-400"></i>
          Back to Portfolio
        </a>

        <span class="inline-flex items-center px-3 py-1.5 neon-pill bg-slate-900/70 text-xs text-cyan-300">
          <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 mr-1.5 animate-pulse"></span>
          Demo Â· Ethereum Â· Web3.js Â· React
        </span>
      </div>
    </div>
  </div>

  <!-- Root for React app -->
  <div id="root" class="max-w-6xl mx-auto px-4 py-8"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const CHAIN_NAMES = {
      "0x1": "Ethereum Mainnet",
      "0x5": "Goerli",
      "0xaa36a7": "Sepolia",
      "0x89": "Polygon",
      "0x13881": "Mumbai"
    };

    // ðŸ‘‰ Replace this with your *testnet* merchant address for real txs
    const MERCHANT_ADDRESS = "0x0000000000000000000000000000000000000000";

    const initialPayments = [
      {
        id: "INV-2041",
        customer: "Prime Crypto Store",
        amountEth: "0.42",
        fiat: "$1,305.00",
        network: "Sepolia",
        status: "Settled",
        statusType: "success",
        time: "12 min ago",
        txHash: "0x7dâ€¦a9f3",
        method: "ETH"
      },
      {
        id: "INV-2038",
        customer: "DeFi Analytics Pro",
        amountEth: "0.13",
        fiat: "$395.20",
        network: "Polygon",
        status: "Pending",
        statusType: "pending",
        time: "3 min ago",
        txHash: "0xa1â€¦b74c",
        method: "USDC"
      },
      {
        id: "INV-2036",
        customer: "NFT Launchpad",
        amountEth: "0.87",
        fiat: "$2,707.80",
        network: "Sepolia",
        status: "Failed",
        statusType: "failed",
        time: "26 min ago",
        txHash: "0x4fâ€¦c892",
        method: "ETH"
      }
    ];

    function App() {
      const [web3, setWeb3] = useState(null);
      const [account, setAccount] = useState(null);
      const [chainId, setChainId] = useState(null);
      const [amountEth, setAmountEth] = useState("0.05");
      const [fiatAmount, setFiatAmount] = useState("150.00");
      const [currency, setCurrency] = useState("USD");
      const [asset, setAsset] = useState("ETH");
      const [memo, setMemo] = useState("Order #2042 â€“ Premium subscription");
      const [status, setStatus] = useState("Connect a wallet to start a live crypto payment.");
      const [statusTone, setStatusTone] = useState("idle");
      const [isPaying, setIsPaying] = useState(false);
      const [txHash, setTxHash] = useState(null);
      const [payments, setPayments] = useState(initialPayments);

      useEffect(() => {
        if (!window.ethereum) return;

        const handleAccountsChanged = (accounts) => {
          setAccount(accounts[0] || null);
        };

        const handleChainChanged = (cid) => {
          setChainId(cid);
        };

        window.ethereum.on("accountsChanged", handleAccountsChanged);
        window.ethereum.on("chainChanged", handleChainChanged);

        return () => {
          if (!window.ethereum.removeListener) return;
          window.ethereum.removeListener("accountsChanged", handleAccountsChanged);
          window.ethereum.removeListener("chainChanged", handleChainChanged);
        };
      }, []);

      const connectWallet = async () => {
        if (!window.ethereum) {
          setStatus("No Web3 wallet detected. Install MetaMask to try the live flow.");
          setStatusTone("error");
          return;
        }

        try {
          const provider = window.ethereum;
          const accounts = await provider.request({ method: "eth_requestAccounts" });
          const cid = await provider.request({ method: "eth_chainId" });

          const w3 = new Web3(provider);
          setWeb3(w3);
          setAccount(accounts[0]);
          setChainId(cid);
          setStatus("Wallet connected. Configure a payment and click â€œSend Paymentâ€.");
          setStatusTone("ok");
        } catch (err) {
          console.error(err);
          setStatus("Wallet connection cancelled.");
          setStatusTone("error");
        }
      };

      const handlePay = async (e) => {
        e.preventDefault();
        setTxHash(null);

        if (!web3 || !account) {
          setStatus("Please connect a wallet first.");
          setStatusTone("error");
          return;
        }

        if (!amountEth || Number(amountEth) <= 0) {
          setStatus("Enter a positive crypto amount.");
          setStatusTone("error");
          return;
        }

        const weiValue = web3.utils.toWei(amountEth.toString(), "ether");

        const txParams = {
          from: account,
          to: MERCHANT_ADDRESS,
          value: weiValue
        };

        // DEMO MODE: we donâ€™t actually send a real transaction unless merchant
        // address is configured. This keeps the demo safe + $0.
        if (/^0x0{40}$/i.test(MERCHANT_ADDRESS)) {
          setStatus("Demo mode: MERCHANT_ADDRESS is not configured. Transaction payload generated but not broadcast.");
          setStatusTone("warning");

          const newPayment = {
            id: "INV-" + (2042 + payments.length),
            customer: "Demo Customer",
            amountEth,
            fiat: `${currency} ${fiatAmount}`,
            network: CHAIN_NAMES[chainId] || "Unknown",
            status: "Simulated",
            statusType: "pending",
            time: "Just now",
            txHash: "0xsimulated-demo",
            method: asset
          };

          setPayments([newPayment, ...payments]);
          return;
        }

        try {
          setIsPaying(true);
          setStatus("Waiting for wallet confirmationâ€¦");
          setStatusTone("pending");

          const hash = await window.ethereum.request({
            method: "eth_sendTransaction",
            params: [txParams]
          });

          setTxHash(hash);
          setStatus("Transaction submitted to the network.");
          setStatusTone("ok");

          const newPayment = {
            id: "INV-" + (2042 + payments.length),
            customer: "Live Customer",
            amountEth,
            fiat: `${currency} ${fiatAmount}`,
            network: CHAIN_NAMES[chainId] || "Unknown",
            status: "Pending",
            statusType: "pending",
            time: "Just now",
            txHash: hash.slice(0, 6) + "â€¦" + hash.slice(-4),
            method: asset
          };

          setPayments([newPayment, ...payments]);
        } catch (err) {
          console.error(err);
          setStatus(err?.message || "Payment rejected or failed.");
          setStatusTone("error");
        } finally {
          setIsPaying(false);
        }
      };

      const networkLabel = chainId ? (CHAIN_NAMES[chainId] || `Chain ID ${parseInt(chainId, 16)}`) : "No network";

      const settlementVolume = payments.reduce((acc, p) => acc + Number(p.amountEth || 0), 0).toFixed(2);

      return (
        <div className="space-y-6 pb-10">
          {/* Hero / context */}
          <div className="glass-panel px-6 py-5 sm:px-8 sm:py-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
              <div className="inline-flex items-center px-2.5 py-1 rounded-full bg-slate-900/80 border border-slate-700/60 text-xs text-slate-300 mb-3">
                <i className="fa-solid fa-shield-halved mr-2 text-emerald-400"></i>
                Secure Ethereum payments Â· Smart contracts Â· Real-time settlement
              </div>
              <h1 className="text-xl sm:text-2xl font-semibold text-slate-50 mb-1">
                Fin-Viz Dashboard Â· Blockchain Payment Gateway
              </h1>
              <p className="text-sm text-slate-400 max-w-2xl">
                React + Web3.js front-end that can connect to any EVM wallet and generate
                Ethereum-based payments. This demo runs fully in the browser using testnet-friendly patterns
                and a Node.js backend can be wired in behind the scenes for production.
              </p>
            </div>

            <div className="text-right space-y-2">
              <button
                onClick={connectWallet}
                className="inline-flex items-center px-4 py-2.5 rounded-xl bg-gradient-to-r from-cyan-400 to-emerald-400 text-slate-950 font-semibold text-sm shadow-lg shadow-cyan-500/40 hover:shadow-emerald-500/40 hover:scale-[1.01] transition"
              >
                <i className="fa-brands fa-ethereum mr-2"></i>
                {account ? "Wallet Connected" : "Connect Wallet"}
              </button>
              <div className="text-[10px] text-slate-400">
                {account ? (
                  <>
                    <span className="font-mono text-emerald-300 mr-2">
                      {account.slice(0, 6)}â€¦{account.slice(-4)}
                    </span>
                    <span className="text-slate-500">on {networkLabel}</span>
                  </>
                ) : (
                  <>No wallet connected</>
                )}
              </div>
            </div>
          </div>

          {/* Main layout */}
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
            {/* Left: metrics + activity */}
            <div className="space-y-6 lg:col-span-2">
              <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <div className="gradient-border">
                  <div className="gradient-border-inner px-4 py-3">
                    <div className="text-[11px] uppercase tracking-wide text-sky-300 flex items-center justify-between">
                      Network Volume
                      <i className="fa-solid fa-chart-line text-sky-400"></i>
                    </div>
                    <div className="mt-1 text-2xl font-semibold text-slate-50">
                      {settlementVolume} ETH
                    </div>
                    <div className="mt-1 text-xs text-slate-400">
                      Across {payments.length} recent merchant payments.
                    </div>
                  </div>
                </div>

                <div className="glass-panel px-4 py-3">
                  <div className="text-[11px] uppercase tracking-wide text-violet-300 flex items-center justify-between">
                    Conversion Health
                    <i className="fa-solid fa-heart-pulse text-violet-400"></i>
                  </div>
                  <div className="mt-1 flex items-baseline justify-between">
                    <span className="text-2xl font-semibold text-slate-50">97.3%</span>
                    <span className="text-[11px] text-emerald-300">+4.1% this week</span>
                  </div>
                  <div className="mt-2 h-1.5 rounded-full bg-slate-800 overflow-hidden">
                    <div className="h-full w-[78%] bg-gradient-to-r from-emerald-400 via-cyan-400 to-sky-500"></div>
                  </div>
                </div>

                <div className="glass-panel px-4 py-3">
                  <div className="text-[11px] uppercase tracking-wide text-emerald-300 flex items-center justify-between">
                    Risk Engine
                    <i className="fa-solid fa-shield text-emerald-400"></i>
                  </div>
                  <div className="mt-1 flex items-baseline justify-between">
                    <span className="text-2xl font-semibold text-slate-50">Low</span>
                    <span className="text-[11px] text-slate-400">On-chain fraud score</span>
                  </div>
                  <p className="mt-1 text-xs text-slate-500">
                    Smart contract guardrails &amp; allow-listed merchant wallets.
                  </p>
                </div>
              </div>

              {/* Recent payments table */}
              <div className="glass-panel px-5 py-4 overflow-hidden">
                <div className="flex items-center justify-between mb-3">
                  <div>
                    <h2 className="text-sm font-semibold text-slate-100">
                      Recent Payments
                    </h2>
                    <p className="text-xs text-slate-500">
                      Real-time ledger of crypto payments flowing through the gateway.
                    </p>
                  </div>
                  <span className="text-[11px] text-slate-400">
                    Mode:&nbsp;
                    <span className="font-semibold text-emerald-300">
                      {/^0x0{40}$/i.test(MERCHANT_ADDRESS) ? "Simulation / Testnet" : "Live Merchant"}
                    </span>
                  </span>
                </div>

                <div className="overflow-x-auto -mx-3">
                  <table className="min-w-full text-xs text-left text-slate-300">
                    <thead className="border-b border-slate-800 text-slate-400 uppercase tracking-wide">
                      <tr>
                        <th className="px-3 py-2">Invoice</th>
                        <th className="px-3 py-2">Customer</th>
                        <th className="px-3 py-2">Amount</th>
                        <th className="px-3 py-2">Network</th>
                        <th className="px-3 py-2">Status</th>
                        <th className="px-3 py-2">TX</th>
                        <th className="px-3 py-2 text-right">Age</th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-slate-900/70">
                      {payments.map((p) => (
                        <tr key={p.id} className="hover:bg-slate-900/60">
                          <td className="px-3 py-2 font-mono text-[11px] text-sky-300">{p.id}</td>
                          <td className="px-3 py-2">{p.customer}</td>
                          <td className="px-3 py-2">
                            <div className="flex flex-col">
                              <span className="font-medium text-slate-100">{p.amountEth} {p.method}</span>
                              <span className="text-[11px] text-slate-400">{p.fiat}</span>
                            </div>
                          </td>
                          <td className="px-3 py-2 text-[11px] text-slate-300">{p.network}</td>
                          <td className="px-3 py-2">
                            <span className={
                              "status-pill " +
                              (p.statusType === "success"
                                ? "success"
                                : p.statusType === "failed"
                                ? "failed"
                                : "pending")
                            }>
                              {p.status}
                            </span>
                          </td>
                          <td className="px-3 py-2 text-[11px] font-mono text-slate-400">
                            {p.txHash}
                          </td>
                          <td className="px-3 py-2 text-[11px] text-right text-slate-400">
                            {p.time}
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            {/* Right: new payment form */}
            <div className="space-y-4">
              <div className="glass-panel px-5 py-4">
                <div className="flex items-center justify-between mb-3">
                  <div>
                    <h2 className="text-sm font-semibold text-slate-100">
                      Create Payment
                    </h2>
                    <p className="text-xs text-slate-500">
                      Configure a crypto invoice and push a transaction through Web3.
                    </p>
                  </div>
                  <span className="inline-flex items-center px-2 py-1 rounded-full bg-slate-900/70 border border-slate-700/60 text-[10px] text-slate-300">
                    <i className="fa-brands fa-react mr-1 text-cyan-300"></i>
                    React Â· Web3.js Â· Solidity-ready
                  </span>
                </div>

                <form className="space-y-3" onSubmit={handlePay}>
                  <div>
                    <label className="block text-[11px] font-semibold text-slate-300 mb-1">
                      Crypto Amount
                    </label>
                    <div className="flex gap-2">
                      <input
                        type="number"
                        step="0.0001"
                        min="0"
                        value={amountEth}
                        onChange={(e) => setAmountEth(e.target.value)}
                        className="flex-1 bg-slate-900/80 border border-slate-700/80 rounded-lg px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400"
                        placeholder="0.05"
                      />
                      <select
                        value={asset}
                        onChange={(e) => setAsset(e.target.value)}
                        className="w-24 bg-slate-900/80 border border-slate-700/80 rounded-lg px-2 py-2 text-xs text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400"
                      >
                        <option>ETH</option>
                        <option>USDC</option>
                        <option>DAI</option>
                      </select>
                    </div>
                  </div>

                  <div className="grid grid-cols-3 gap-2">
                    <div className="col-span-2">
                      <label className="block text-[11px] font-semibold text-slate-300 mb-1">
                        Fiat Amount
                      </label>
                      <input
                        type="text"
                        value={fiatAmount}
                        onChange={(e) => setFiatAmount(e.target.value)}
                        className="w-full bg-slate-900/80 border border-slate-700/80 rounded-lg px-3 py-2 text-sm text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400"
                        placeholder="150.00"
                      />
                    </div>
                    <div>
                      <label className="block text-[11px] font-semibold text-slate-300 mb-1">
                        Currency
                      </label>
                      <select
                        value={currency}
                        onChange={(e) => setCurrency(e.target.value)}
                        className="w-full bg-slate-900/80 border border-slate-700/80 rounded-lg px-2 py-2 text-xs text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400"
                      >
                        <option>USD</option>
                        <option>CAD</option>
                        <option>EUR</option>
                      </select>
                    </div>
                  </div>

                  <div>
                    <label className="block text-[11px] font-semibold text-slate-300 mb-1">
                      Payment Memo
                    </label>
                    <textarea
                      value={memo}
                      onChange={(e) => setMemo(e.target.value)}
                      rows="2"
                      className="w-full bg-slate-900/80 border border-slate-700/80 rounded-lg px-3 py-2 text-xs text-slate-100 focus:outline-none focus:ring-1 focus:ring-cyan-400"
                    ></textarea>
                  </div>

                  <div className="text-[10px] text-slate-500 border border-dashed border-slate-700/80 rounded-lg px-3 py-2 bg-slate-950/60">
                    <div className="flex items-center justify-between mb-1">
                      <span className="uppercase tracking-wide text-slate-400">
                        Transaction Preview
                      </span>
                      <span className="font-mono text-[9px] text-slate-500">
                        to {MERCHANT_ADDRESS === "0x0000000000000000000000000000000000000000"
                          ? "0xYourMerchantAddress"
                          : MERCHANT_ADDRESS.slice(0, 8) + "â€¦" + MERCHANT_ADDRESS.slice(-6)}
                      </span>
                    </div>
                    <pre className="whitespace-pre-wrap font-mono text-[10px] text-slate-400">
{`{
  from: "${account || "0xWallet"}",
  to: "${MERCHANT_ADDRESS === "0x0000000000000000000000000000000000000000" ? "0xYourMerchantAddress" : MERCHANT_ADDRESS}",
  value: "${amountEth || "0"} ETH",
  network: "${networkLabel}",
  memo: "${memo}"
}`}
                    </pre>
                  </div>

                  <button
                    type="submit"
                    disabled={isPaying}
                    className="w-full mt-2 inline-flex items-center justify-center px-4 py-2.5 rounded-xl bg-gradient-to-r from-cyan-400 via-sky-400 to-emerald-400 text-slate-950 font-semibold text-sm shadow-lg shadow-sky-500/40 hover:shadow-emerald-500/40 hover:scale-[1.01] disabled:opacity-60 disabled:cursor-not-allowed transition"
                  >
                    {isPaying ? (
                      <>
                        <span className="w-3 h-3 border-2 border-slate-900 border-t-transparent rounded-full animate-spin mr-2"></span>
                        Sending Paymentâ€¦
                      </>
                    ) : (
                      <>
                        <i className="fa-solid fa-paper-plane mr-2"></i>
                        Send Payment
                      </>
                    )}
                  </button>
                </form>
              </div>

              {/* Status panel */}
              <div className="glass-panel px-4 py-3 text-xs">
                <div className="flex items-center justify-between mb-1">
                  <span className="uppercase tracking-wide text-slate-400">
                    Gateway Status
                  </span>
                  <span className="text-[10px] text-slate-500">
                    Frontend: React Â· Web3.js Â· Tailwind
                  </span>
                </div>
                <div className="flex items-start gap-2">
                  <span className={
                    "mt-0.5 w-1.5 h-1.5 rounded-full " +
                    (statusTone === "ok"
                      ? "bg-emerald-400 shadow-[0_0_12px_rgba(16,185,129,0.9)]"
                      : statusTone === "pending"
                      ? "bg-amber-400 shadow-[0_0_12px_rgba(245,158,11,0.9)] animate-pulse"
                      : statusTone === "error"
                      ? "bg-rose-400 shadow-[0_0_12px_rgba(248,113,113,0.9)]"
                      : "bg-slate-500")
                  }></span>
                  <p className="text-slate-300 leading-relaxed">{status}</p>
                </div>

                {txHash && (
                  <div className="mt-2 text-[10px] text-slate-400 break-all">
                    Last tx hash:&nbsp;
                    <span className="font-mono">{txHash}</span>
                  </div>
                )}

                <div className="mt-2 text-[10px] text-slate-500">
                  <strong>Note:</strong> To keep this demo at $0 cost and recruiter-friendly, it defaults to
                  simulation mode. Replace <span className="font-mono text-emerald-300">MERCHANT_ADDRESS</span> in
                  the source with your own <span className="font-mono">Sepolia</span> or other testnet address
                  and it will send real testnet transactions via MetaMask.
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
